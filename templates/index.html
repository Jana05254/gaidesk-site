{% extends "base.html" %}
{% block content %}
<h4 class="mb-3">لوحة بيانات Firebase</h4>

<div class="row g-3">
  <div class="col-12 col-md-3"><div class="card p-3"><div class="text-muted">آخر حرارة</div><div class="display-6 fw-bold" id="m-temp">–</div></div></div>
  <div class="col-12 col-md-3"><div class="card p-3"><div class="text-muted">آخر CO₂</div><div class="display-6 fw-bold" id="m-co2">–</div></div></div>
  <div class="col-12 col-md-3"><div class="card p-3"><div class="text-muted">آخر وجود</div><div class="display-6 fw-bold" id="m-presence">–</div></div></div>
  <div class="col-12 col-md-3"><div class="card p-3"><div class="text-muted">عدد القراءات</div><div class="display-6 fw-bold" id="m-count">0</div></div></div>
</div>

<div class="card p-3 mt-3">
  <div class="d-flex justify-content-between align-items-center">
    <h6 class="mb-0">الرسم البياني</h6>
    <div class="form-check form-switch">
      <input class="form-check-input" type="checkbox" id="autoRefresh" checked>
      <label class="form-check-label" for="autoRefresh">تحديث تلقائي</label>
    </div>
  </div>
  <canvas id="chart" height="90" class="mt-2"></canvas>
</div>

<div class="card p-3 mt-3">
  <h6>آخر 25 قراءة</h6>
  <div class="table-responsive" style="max-height:420px;">
    <table class="table align-middle">
      <thead><tr><th>الوقت</th><th>°C</th><th>CO₂</th><th>وجود</th><th>خطر</th></tr></thead>
      <tbody id="rows"></tbody>
    </table>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  window.DASH_LIMIT = 25;
</script>
{% endblock %}

