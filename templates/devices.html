{% extends "base.html" %}{% block content %}
<h4 class="mb-3">الأجهزة</h4>
<div class="card p-3">
  <ul id="dev-list" class="list-group"></ul>
</div>
<script>
(async ()=>{
  const r=await fetch('/api/devices'); const list=await r.json();
  const ul=document.getElementById('dev-list'); ul.innerHTML='';
  list.forEach(name=>{
    const li=document.createElement('li'); li.className='list-group-item d-flex justify-content-between';
    li.textContent=name;
    const a=document.createElement('a'); a.href=`/app?device=${encodeURIComponent(name)}`; a.className='btn btn-sm btn-primary'; a.textContent='عرض في اللوحة';
    li.appendChild(a); ul.appendChild(li);
  });
})();
</script>
{% endblock %}
